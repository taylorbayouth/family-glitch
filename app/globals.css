/**
 * ============================================================================
 * GLOBAL STYLES - Family Glitch
 * ============================================================================
 *
 * Core styles applied across the entire app.
 *
 * Organization:
 * 1. Tailwind directives
 * 2. CSS custom properties (design tokens)
 * 3. Base element styles
 * 4. Utility classes
 * 5. Component-specific globals
 */

/* ===========================================================================
   TAILWIND DIRECTIVES
   =========================================================================== */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===========================================================================
   CSS CUSTOM PROPERTIES (Design Tokens)
   =========================================================================== */

:root {
  /* Dynamic viewport height (accounts for mobile browser chrome) */
  --vh: 1vh;

  /* Z-index scale */
  --z-base: 0;
  --z-dropdown: 1000;
  --z-modal: 2000;
  --z-toast: 3000;
  --z-debug: 9999;

  /* Spacing scale (complements Tailwind) */
  --touch-target: 44px; /* Minimum tap target size */

  /* Animation durations */
  --transition-fast: 200ms;
  --transition-normal: 300ms;
  --transition-slow: 500ms;

  /* Border radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;

  /* Shadows (for depth) */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

/* ===========================================================================
   BASE ELEMENT STYLES
   =========================================================================== */

/**
 * CSS Variables - Font Family
 */
:root {
  --font-sans: var(--font-poppins), ui-sans-serif, system-ui, sans-serif;
}

/**
 * Reset box-sizing for all elements
 * This prevents padding/border from affecting element dimensions
 */
*,
*::before,
*::after {
  box-sizing: border-box;
}

/**
 * Root element - full viewport height
 */
html {
  height: 100%;
  /* Prevent text size adjustments on iOS (can break layout) */
  -webkit-text-size-adjust: 100%;
  /* Smooth scrolling (though we avoid scrolling in this app) */
  scroll-behavior: smooth;
}

/**
 * Body element - full height, prevent overscroll
 */
body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: var(--font-sans);
  /* Prevent pull-to-refresh on mobile */
  overscroll-behavior-y: none;
  /* Prevent text selection during gameplay */
  -webkit-user-select: none;
  user-select: none;
  /* Disable tap highlight on mobile */
  -webkit-tap-highlight-color: transparent;
  /* Native scrolling feel on iOS */
  -webkit-overflow-scrolling: touch;
}

/**
 * Allow text selection in input elements
 */
input,
textarea,
[contenteditable] {
  -webkit-user-select: text;
  user-select: text;
}

/**
 * Button reset - remove default styles
 */
button {
  cursor: pointer;
  border: none;
  background: none;
  padding: 0;
  font: inherit;
  color: inherit;
  /* Remove tap highlight */
  -webkit-tap-highlight-color: transparent;
}

/**
 * Link reset
 */
a {
  color: inherit;
  text-decoration: none;
}

/**
 * Image defaults
 */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* ===========================================================================
   UTILITY CLASSES
   =========================================================================== */

/**
 * Full viewport layout - key class for all game screens
 * Ensures content never exceeds viewport (no scrolling)
 */
.viewport-container {
  height: 100dvh; /* Dynamic viewport height */
  width: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Critical: prevent any scrolling */
}

/**
 * Safe area insets (for notched devices)
 */
.safe-area-top {
  padding-top: env(safe-area-inset-top);
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-left {
  padding-left: env(safe-area-inset-left);
}

.safe-area-right {
  padding-right: env(safe-area-inset-right);
}

/**
 * Flex utilities for common layouts
 */
.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/**
 * Touch-friendly tap targets
 * Ensures all interactive elements are at least 44x44px
 */
.tap-target {
  min-width: var(--touch-target);
  min-height: var(--touch-target);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/**
 * Text truncation
 */
.truncate-1 {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.truncate-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.truncate-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/**
 * Animations
 */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fade-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes slide-up {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-down {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes pulse-glow {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.animate-fade-in {
  animation: fade-in var(--transition-normal) ease-in;
}

.animate-fade-out {
  animation: fade-out var(--transition-normal) ease-out;
}

.animate-slide-up {
  animation: slide-up var(--transition-normal) ease-out;
}

.animate-slide-down {
  animation: slide-down var(--transition-normal) ease-out;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes glitch {
  0% {
    text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
      0.025em 0.04em 0 #fffc00;
  }
  15% {
    text-shadow: 0.05em 0 0 #00fffc, -0.03em -0.04em 0 #fc00ff,
      0.025em 0.04em 0 #fffc00;
  }
  16% {
    text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff,
      -0.05em -0.05em 0 #fffc00;
  }
  49% {
    text-shadow: -0.05em -0.025em 0 #00fffc, 0.025em 0.035em 0 #fc00ff,
      -0.05em -0.05em 0 #fffc00;
  }
  50% {
    text-shadow: 0.05em 0.035em 0 #00fffc, 0.03em 0 0 #fc00ff,
      0 -0.04em 0 #fffc00;
  }
  99% {
    text-shadow: 0.05em 0.035em 0 #00fffc, 0.03em 0 0 #fc00ff,
      0 -0.04em 0 #fffc00;
  }
  100% {
    text-shadow: -0.05em 0 0 #00fffc, -0.025em -0.04em 0 #fc00ff,
      -0.04em -0.025em 0 #fffc00;
  }
}

.glitch {
  animation: glitch 1s linear infinite;
  font-weight: 700;
  letter-spacing: -0.02em;
}

/**
 * Big chunky text utilities
 */
.text-chunky {
  font-weight: 700;
  letter-spacing: -0.02em;
  line-height: 1.1;
}

.text-huge {
  font-size: clamp(3rem, 10vw, 6rem);
}

.text-mega {
  font-size: clamp(2rem, 8vw, 4rem);
}

/* ===========================================================================
   COMPONENT-SPECIFIC GLOBALS
   =========================================================================== */

/**
 * Button variants (base styles)
 */
.btn {
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-weight: 600;
  transition: all 200ms;
}

.btn:active {
  transform: scale(0.95);
}

.btn-primary {
  background-color: #6366f1;
  color: white;
}

.btn-primary:hover {
  background-color: #4f46e5;
}

.btn-primary:active {
  background-color: #4338ca;
}

.btn-secondary {
  background-color: #a855f7;
  color: white;
}

.btn-secondary:hover {
  background-color: #9333ea;
}

.btn-secondary:active {
  background-color: #7e22ce;
}

.btn-outline {
  border: 2px solid #6366f1;
  color: #6366f1;
  background-color: transparent;
}

.btn-outline:hover {
  background-color: #eef2ff;
}

.btn-outline:active {
  background-color: #e0e7ff;
}

.btn-danger {
  background-color: #ef4444;
  color: white;
}

.btn-danger:hover {
  background-color: #dc2626;
}

.btn-ghost {
  color: #404040;
  background-color: transparent;
}

.btn-ghost:hover {
  background-color: #f5f5f5;
}

.btn-ghost:active {
  background-color: #e5e5e5;
}

/**
 * Input field base styles
 */
.input {
  width: 100%;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  border: 2px solid #d4d4d4;
  font-size: 1rem;
  color: #171717;
  transition: all 200ms;
}

.input::placeholder {
  color: #a3a3a3;
}

.input:focus {
  outline: none;
  border-color: #6366f1;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.textarea {
  width: 100%;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  border: 2px solid #d4d4d4;
  font-size: 1rem;
  color: #171717;
  resize: none;
  transition: all 200ms;
}

.textarea::placeholder {
  color: #a3a3a3;
}

.textarea:focus {
  outline: none;
  border-color: #6366f1;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

/**
 * Card base styles
 */
.card {
  background-color: white;
  border-radius: 0.75rem;
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  padding: 1.5rem;
  border: 1px solid #e5e5e5;
}

/**
 * Modal backdrop
 */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
}

/**
 * Toast notification positioning
 */
.toast-container {
  position: fixed;
  top: 1rem;
  left: 50%;
  transform: translateX(-50%);
  z-index: var(--z-toast);
  pointer-events: none;
}

/**
 * Loading spinner
 */
.spinner {
  display: inline-block;
  width: 2rem;
  height: 2rem;
  border: 4px solid #d4d4d4;
  border-top-color: #6366f1;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/**
 * Progress bar base
 */
.progress-bar {
  width: 100%;
  height: 0.5rem;
  background-color: #e5e5e5;
  border-radius: 9999px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background-color: #6366f1;
  transition: all 300ms ease-out;
}

/* ===========================================================================
   DEBUG UTILITIES (Development Only)
   =========================================================================== */

/**
 * Debug overlay for development
 * Shows viewport dimensions, breakpoints, etc.
 */
.debug-overlay {
  @apply fixed top-0 left-0 right-0 bg-black/75 text-white text-xs p-2;
  @apply z-[var(--z-debug)] pointer-events-none;
  @apply font-mono;
}

/**
 * Visual debugging for layout issues
 * Add .debug-layout to any element to see its boundaries
 */
.debug-layout * {
  outline: 1px solid red !important;
}

/* ===========================================================================
   PRINT STYLES (For session export/PDF)
   =========================================================================== */

@media print {
  body {
    background: white;
    color: black;
  }

  .no-print {
    display: none !important;
  }

  .page-break {
    page-break-after: always;
  }
}
